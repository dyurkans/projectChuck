<%= render :partial => 'full_nested_form' %>
<script>
  $(function() {
    var first_page = 1;
    var current_page_number = first_page;
    var previous_page_number = current_page_number-1;
    var last_page = 6;
    var default_legend_name = $("#registrationFormLegend").text();
    var legend_names = [default_legend_name, "Guardian Information", "Student School Information", "Insurance Information", "Medical Information", "Terms and Conditions"];
    $("#myContinue").click(function() {
      if (first_page <= current_page_number && current_page_number < last_page) {
        previous_page_number = current_page_number;
        current_page_number++;
        
        $("#page"+previous_page_number).addClass('myHide');
        var legend_index = current_page_number-1
        if (0 <= legend_index && legend_index <= legend_names.length) {
          $("#registrationFormLegend").text(legend_names[legend_index])
        }
        $("#page"+current_page_number).removeClass('myHide');

        //if not on first page then show previous button
        if (current_page_number > first_page) {
          $("#myPrevious").removeClass('myHide');
        }
        else {
          $("#myPrevious").addClass('myHide');
        }
      
        //if on last page then show submit button
        if (current_page_number === last_page) {
          $("#registrationNestedSubmit").removeClass('myHide');
          $("#myContinue").addClass('myHide');
       }
        else {
          $("#registrationNestedSubmit").addClass('myHide');
          $("#myContinue").removeClass('myHide');
        }
      }
    });
    
    $("#myPrevious").click(function() {
      if (first_page < current_page_number && current_page_number <= last_page) {
        $("#page"+current_page_number).addClass('myHide');
        $("#page"+previous_page_number).removeClass('myHide');
        current_page_number = previous_page_number;
        previous_page_number--;
        
        var legend_index = current_page_number-1
        if (0 <= legend_index && legend_index <= legend_names.length) {
          $("#registrationFormLegend").text(legend_names[legend_index])
        }

        //if not on first page then show previous button
        if (current_page_number > first_page) {
          $("#myPrevious").removeClass('myHide');
        }
        else {
          $("#myPrevious").addClass('myHide');
        }
      
        //if on last page then show submit button
        if (current_page_number === last_page) {
          $("#registrationNestedSubmit").removeClass('myHide');
          $("#myContinue").addClass('myHide');
       }
        else {
          $("#registrationNestedSubmit").addClass('myHide');
          $("#myContinue").removeClass('myHide');
        }
      }
    });
  });
</script>
